<div class="chat-message" [class.chat-message--in]="direction === 'in'" [class.chat-message--out]="direction === 'out'">
    <div class="chat-message-text-wrapper">
        <div *ngIf="avatar" class="chat-message-avatar">
            <ngx-chat-avatar [class.has-click-handler]="avatarInteractive" (click)="avatarClickHandler.emit()"
                [imageUrl]="avatar"></ngx-chat-avatar>
        </div>
        <div class="chat-message-text">
            <ng-content></ng-content>
        </div>
    </div>

    <div class="chat-message-image-wrapper"
        *ngIf="imageLink && !imageLink.includes('mp3') &&  !imageLink.includes('ogg') &&  !imageLink.includes('mp4')">
        <img class="chat-message-image" [src]="imageLink" />
    </div>

    <audio class="audio-custome" controls *ngIf="imageLink && imageLink.includes('mp3')">
        <source [src]="imageLink" type="audio/mpeg">
    </audio>

    <div class="chat-message-image-wrapper"
        *ngIf="imageLink && imageLink.includes('mp4') || imageLink && imageLink.includes('ogg')">
        <video style="width: 100% ;" class="chat-message-image" controls>
            <source [src]="imageLink" type="video/mp4">
        </video>
    </div>



    <div class="chat-message-footer" *ngIf="!footerHidden">
        <small title="{{nick}}" class="chat-message-name">
            {{nick}}
            <ng-container *ngIf="direction === 'out'" [ngSwitch]="messageState">
                <ng-container *ngSwitchCase="MessageState.SENT">✓</ng-container>
                <ng-container *ngSwitchCase="MessageState.RECIPIENT_RECEIVED">✓✓</ng-container>
                <ng-container *ngSwitchCase="MessageState.RECIPIENT_SEEN"><span class="state--seen">✓✓</span>
                </ng-container>
            </ng-container>
        </small>
        <small class="chat-message-datetime">{{formattedDate}}</small>
    </div>
</div>
